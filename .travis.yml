language: python
matrix:
  include:
  - python: 3.8
    env: TOXENV=flake8
  - python: 3.8
    env: TOXENV=mypy
  - python: 3.8
    env: TOXENV=black
  - python: 3.6
    env: TOXENV=py36
  - python: 3.7
    env: TOXENV=py37
  - python: 3.8
    env: TOXENV=py38
  - python: 3.9-dev
    env: TOXENV=py39
  - python: pypy3
    env: TOXENV=pypy36
  - name: py37-macOS
    os: osx
    osx_image: xcode12
    language: shell
    install:
    - pip3 install pytest
    script:
    - python3 -m pytest tests
    - python3 setup.py install
  - name: py38-win10
    os: windows
    language: shell
    before_install:
    - choco install python --version 3.8.0
    - python -m pip install --upgrade pip
    env: PATH=/c/Python38:/c/Python38/Scripts:$PATH
    install:
    - pip install pytest
    script:
    - python -m pytest tests
    - python setup.py install
install:
- pip install tox
script:
- tox
deploy:
  provider: pypi
  user: henningu
  password:
    secure: JIk79aaEPGnoxJVhVbxYWlMdBpdOQkipyUn4zdGTCKkAP5UZAYLi2ROPow3DpBniRahra8V5745HQ1Rlz4laEdG1vlZpdjLnDPNlyMMhuztEarWkXMOKbEte4kQvr6k0CV6o3MKlTgnrPfjWE4B4wV0YhHJIeY2PLRcSGXvXSyHzuWUjQXY5wFa3p2NQJrWSqnyYkLZ/YVL4V+G1u7fXsulbRtT5CHVmwmmmyp/VVbIWdypqSetz91EUgpAAdGIQW2x9loHwxy80P9hBz86RNACWqdiWEFreUpHJS+32WbMca1Kq/5IzLZ+uz8ehrSiWAzfIuKcyVZ+YIR+j9mBenkcgvH9cyMmRvf8pn49/iAzFbqRvhaZ71OR2F82w8QWaes26L8Usqnnt8U7qJcbAs0WDFaoG5s3/zbo0gabT8YRjngnNPu0G+Jb+ESaXtbFf26+tYFxoQZ+S6qudQlbMkpiv7ye29qKsy+h5imb2i6rJm24see200dtFStPxkaCuD9Df2ZUKXOta8ru0XNS0AH0GskDzEel4QPyjbOLY1BVHV5Z19R5lLbbKl+CySDTm/es73TqQwF9AGevM2kuDmc/AGkeI30Eq+3/moD4uZ/zNmJCkqPDaZIyHNotDUrgFByhdXcN7ptaPdjw77fY+0HEeY9UTvongKow4Crbfa7I=
  skip_existing: true
  on:
    branch: master
    condition: "$TRAVIS_OS_NAME = linux"
