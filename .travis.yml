language: python
matrix:
  include:
  - python: 3.8
    env: TOXENV=flake8
  - python: 3.8
    env: TOXENV=mypy
  - python: 3.8
    env: TOXENV=black
  - python: 3.6
    env: TOXENV=py36
  - python: 3.7
    env: TOXENV=py37
  - python: 3.8
    env: TOXENV=py38
  - python: 3.9-dev
    env: TOXENV=py39
  - python: pypy3
    env: TOXENV=pypy36
  - name: py37-macOS
    os: osx
    osx_image: xcode12
    language: shell
    install:
    - pip3 install pytest
    script:
    - python3 -m pytest tests
    - python3 setup.py install
  - name: py38-win10
    os: windows
    language: shell
    before_install:
    - choco install python --version 3.8.0
    - python -m pip install --upgrade pip
    env: PATH=/c/Python38:/c/Python38/Scripts:$PATH
    install:
    - pip install pytest
    script:
    - python -m pytest tests
    - python setup.py install
install:
- pip install tox
script:
- tox
deploy:
  provider: pypi
  user: henningu
  password:
    secure: kMnVWjttY65iPNcW14hZHa9YhgUZh8WUPwtC9YRWDnVWWWI7Bb98SHhnzHnG0p8ILsBShb0M1ZfqbbdVbX1KAo00d4wdybliqL/4QZHYm3GLbXXck89l9G0DgJr2tC9xJjowMSNVFGn8mIYmhWryefbD5J4Aa0w+DKGTEDWRFbJgJnSGcsED2W/oB5Yk3tlRckA8XGH1t9fGgmJdY6Qz1HdkCGcv81bz6tnAc4WYMTr2UnBW4VhxC2Uqw4/dcXy/uWX6qF4tCxvMbAOOrF8rzNuEzU41PQI8ArWUiyYDC2B00lYpwWI1sNNu5Fn/BWUB8KJwQwmvfve1scq6mEyclM/gp1fGpDOcsRmOMHQQWaRggZe9yTA3nLNFvmrXJaLsU4CXEBCMSujJeZeSYRQfmf0+GXaU2UsA1jX+8mmqAXzc4dXArTCdRk+8Eomvp6ySB2Epfov6jDeRu7FhVBzitQdwnzIp2753hdgZcFOXAXR8ZD7Fr866KEFA4K3xfG16qMqZu2/WpdEnwx4VioD3LUoag3vait87hAzb46Yp+7BcscCYwk38DjnVr66yQ1lhC3iNK0ppGiqQonYbBWmRFRrlduLQThhK0FdEL2a+xpoz1fHXKBThTyJ66dkCmkngJJW9nUdk8c3BvDu+XTOgPQC4Q4FWkv4MaYKhPbc/XAQ=
  skip_existing: true
  on:
    branch: master
    condition: "$TRAVIS_OS_NAME = linux"
