language: python
matrix:
  include:
  - python: 3.8
    env: TOXENV=flake8
  - python: 3.8
    env: TOXENV=mypy
  - python: 3.8
    env: TOXENV=black
  - python: 3.6
    env: TOXENV=py36
  - python: 3.7
    env: TOXENV=py37
  - python: 3.8
    env: TOXENV=py38
  - python: 3.9-dev
    env: TOXENV=py39
  - python: pypy3
    env: TOXENV=pypy36
  - name: py37-macOS
    os: osx
    osx_image: xcode12
    language: shell
    install:
    - pip3 install pytest
    script:
    - python3 -m pytest tests
    - python3 setup.py install
  - name: py38-win10
    os: windows
    language: shell
    before_install:
    - choco install python --version 3.8.0
    - python -m pip install --upgrade pip
    env: PATH=/c/Python38:/c/Python38/Scripts:$PATH
    install:
    - pip install pytest
    script:
    - python -m pytest tests
    - python setup.py install
install:
- pip install tox
script:
- tox
deploy:
  provider: pypi
  user: __token__
  password:
    secure: eWUnLHb3RaOmJxF1tpoFivjEC/lK91JV5rK+z2YHwUxnlHmb08bN3YDhjfwX16t2ftMibt1QkQQjH6ICWshREEzwIswglcIlMyjJp60ZtU09a7bo0l/FyA2QxMqWN4WJq/VLa7YTi3g3kYU9HWbYsrnVySGUOu8nBHDTvVd6uyrYDDr6poGEBUsjHcBw7TkXAVURBWzg81ieVm8c8Io/USQSyUwViP0U1jIHDHLiQZaVmLT3/CLDF/TN9iGnYg6zg/4Of/ME10aQYiStXI/9TQ+tC++9grv+HcxwTg+ckIwhDUj7rpuapwwvHDNwtErcKNtD4v2TeEyPDj1wTpwJKBqrFX5sRj3GdcfagUIEADUFWu2mty9xpzs/dhnttwGmGAQJVWCSTqv35dmoFHcTsPJHpbw2PjVF+TQWKLo4iwjyp4/x19l0S6uIP0/7AyuNkxm1SVSCCefbbmhfLIq/K2JQfcb7a5kg0wIejuRlQOVIUicHozOR1WO0ZlR99l0YLR4Hc/wH1BG2JA9nIAwI3+q4OOJBLgas7ZGE5cG6A8x4EAaD1exShJXhQ0vkM338Gg2BX6OpNgrk/+idPErTcJYWoW1cxNeSJZqRW1df1/Mptsb15krVi3YdvsyUkh+gn2CNOmjcnke4NDM7PnI4ONN4KEsRpagsxJOUEx2ZDdI=
  skip_existing: true
  on:
    branch: master
    condition: $TRAVIS_OS_NAME = linux
